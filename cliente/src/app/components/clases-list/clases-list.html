<div class="main-container">

  <div *ngIf="clasesComoProfe.length > 0 || clasesComoAlumno.length > 0 || archivadasProfe.length > 0">
    <div class="classes-wrapper">

      <div class="d-flex justify-content-between align-items-center mb-3">

        <ul class="nav nav-tabs border-0">
          <li class="nav-item">
            <a class="nav-link" [class.active]="!esVistaProfesor" (click)="cambiarVista()" style="cursor: pointer;">
              Alumno
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" [class.active]="esVistaProfesor" (click)="cambiarVista()" style="cursor: pointer;">
              Profesor
            </a>
          </li>
        </ul>

        <button class="btn btn-sm btn-outline-secondary" (click)="toggleModoArchivadas()">
          <i class="bi" [class.bi-archive]="!modoArchivadas" [class.bi-arrow-left]="modoArchivadas"></i>
          {{ modoArchivadas ? 'Volver a activas' : 'Ver archivadas' }}
        </button>
      </div>

      <h4 class="mt-3">
        <span *ngIf="modoArchivadas"> Archivo de Clases - </span>
        <span *ngIf="esVistaProfesor">Dictadas por usted</span>
        <span *ngIf="!esVistaProfesor">En las que estás inscripto</span>
      </h4>

      <div class="classes-grid">
        <div *ngFor="let clase of clasesAMostrar" class="class-card position-relative"
          [class.archivada-bg]="modoArchivadas">

          <i *ngIf="esVistaProfesor && !modoArchivadas" class="bi bi-archive btn-icon-archivar" title="Archivar clase"
            (click)="$event.stopPropagation(); onArchivarClase(clase._id || '')">
          </i>


          <div class="card-content">
            <h3>{{ clase.nombre }}</h3>
            <p class="materia">Materia: {{ clase.materia }}</p>

            <p *ngIf="esVistaProfesor" class="clave">Clave: {{ clase.clave }}</p>
            <p *ngIf="!esVistaProfesor" class="profesor">
              Profesor: {{ $any(clase.profesorId)?.nombreCompleto || 'No asignado' }}
            </p>

            <button [routerLink]="['/clase', clase._id]" class="btn-enter" [class.btn-secondary]="modoArchivadas">
              {{ modoArchivadas ? 'Ver Material' : 'Entrar' }}
            </button>
          </div>
        </div>
      </div>

      <div *ngIf="clasesAMostrar.length === 0" class="empty-message mt-4">
        <ng-container *ngIf="!modoArchivadas">
          <p *ngIf="esVistaProfesor">No dictas ninguna clase activa.</p>
          <p *ngIf="!esVistaProfesor">No estás inscripto en ninguna clase activa.</p>
        </ng-container>

        <ng-container *ngIf="modoArchivadas">
          <p>No hay clases archivadas en esta sección.</p>
        </ng-container>
      </div>

    </div>
  </div>

  <div
    *ngIf="clasesComoProfe.length === 0 && clasesComoAlumno.length === 0 && archivadasProfe.length === 0 && archivadasAlumno.length === 0"
    class="no-classes-container">
    <div class="no-classes-content">
      <h4 class="mb-4">¡Bienvenido!</h4>
      <p class="mb-4">Aún no estás inscripto en ninguna clase ni dictas alguna.</p>
    </div>
  </div>

</div>