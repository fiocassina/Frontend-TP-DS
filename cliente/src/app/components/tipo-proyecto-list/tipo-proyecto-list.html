<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Listado de Tipos de Proyecto</h2>
    <button class="btn btn-primary" (click)="crearTipoProyecto()">
      <i class="bi bi-plus-circle"></i> Nuevo Tipo de Proyecto
    </button>
  </div>

  <div class="mb-3">
    <div class="input-group">
      <span class="input-group-text bg-white border-end-0">
        <i class="bi bi-search text-muted"></i>
      </span>
      <input type="text" class="form-control border-start-0 ps-0" placeholder="Buscar por nombre o descripción..."
        [(ngModel)]="terminoBusqueda" (input)="filtrar()">
    </div>
  </div>

  <div *ngIf="isLoading" class="text-center my-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
    <p>Cargando tipos de proyecto...</p>
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
    {{ errorMessage }}
  </div>

  <div *ngIf="!isLoading && !errorMessage && tiposFiltrados.length === 0" class="alert alert-info" role="alert">
    No se encontraron tipos de proyecto.
  </div>

  <div *ngIf="!isLoading && !errorMessage && tiposFiltrados.length > 0"
    class="table-responsive shadow-sm border rounded" style="max-height: 400px; overflow-y: auto;">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-light sticky-top">
        <tr>
          <th scope="col" style="width: 30%;">Nombre</th>
          <th scope="col" style="width: 50%;">Descripción</th>
          <th scope="col" class="text-center" style="width: 20%;">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let tipo of tiposFiltrados">
          <td class="fw-bold text-primary">{{ tipo.nombre }}</td>
          <td class="text-muted">{{ tipo.descripcion }}</td>
          <td class="text-center">
            <div class="btn-group" role="group">
              <button class="btn btn-outline-primary btn-sm" (click)="editarTipoProyecto(tipo._id!)" title="Editar">
                <i class="bi bi-pencil-square"></i>
              </button>
              <button class="btn btn-outline-danger btn-sm" (click)="eliminarTipoProyecto(tipo._id!)" title="Eliminar">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="text-muted small mt-2 text-end">
    Mostrando {{ tiposFiltrados.length }} registro(s).
  </div>

</div>